@model IEnumerable<GestionContacts2.WebUi.Models.ContactAdminViewModel>

@{
    ViewBag.Title = "TousLesContacts";
}

@if (ViewBag.MessageErreur != null)
{
    <div class="alert alert-warning text-center">@ViewBag.MessageErreur</div>
}

<h2>Liste des Contacts</h2>
<div class="table-responsive">
    <table class="table table-striped table-hover w-100">
        <thead class="table-dark">
            <tr>
                <th style="min-width:100px;">Nom</th>
                <th style="min-width:100px;">Prénom</th>
                <th style="min-width:180px;">Email</th>
                <th style="min-width:130px;">Numéro de Téléphone</th>
                <th style="min-width:150px;">Adresse</th>
                <th style="min-width:120px;">Entreprise</th>
                <th style="min-width:150px;">Notes</th>
                <th style="min-width:130px;">Date de Création</th>
                <th style="min-width:180px;">Utilisateur associé (Email)</th>
                <th style="min-width:140px;">Utilisateur associé (Nom)</th>
            </tr>
        </thead>
        <tbody>


            @if (!Model.Any())
            {
                <tr>
                    <td colspan="10" class="text-center">Aucun contact trouvé.</td>
                </tr>

            }
            else
            {

                foreach (var contact in Model)
                {
                    <tr>
                        <td style="word-break:break-word;">@contact.Nom</td>
                        <td style="word-break:break-word;">@contact.Prenom</td>
                        <td style="white-space:nowrap;">@contact.Email</td>
                        <td style="white-space:nowrap;">@contact.Telephone</td>
                        <td style="word-break:break-word;">@contact.Adresse</td>
                        <td style="word-break:break-word;">@contact.Entreprise</td>
                        <td style="word-break:break-word;">@contact.NotesPersonnelles</td>
                        <td>@contact.DateCreation.ToString("yyyy-MM-dd")</td>
                        <td style="white-space:nowrap;">@contact.UtilisateurEmail</td>
                        <td style="white-space:nowrap;">@contact.UtilisateurNom</td>
                    </tr>
                }
            }
        </tbody>
    </table>
    @using (Html.BeginForm("TousLesContacts", "Contact", FormMethod.Get))
    {
        <div class="input-group mb-3">
            <input type="text" name="recherche" class="form-control" placeholder="Rechercher un contact..." value="@Request.QueryString["recherche"]" />
            <button class="btn btn-primary" type="submit">Rechercher</button>
        </div>

    }
</div>
