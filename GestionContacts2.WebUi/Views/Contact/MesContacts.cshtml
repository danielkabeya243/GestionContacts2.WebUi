@model IEnumerable<GestionContacts2.WebUi.Models.ContactViewModel>

@{
    ViewBag.Title = "Mes Contacts";
}

<h2 class="text-center mb-4"><i class="bi bi-person-lines-fill"></i> Mes Contacts</h2>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success text-center mb-3">@TempData["SuccessMessage"]</div>
}
@if (TempData["MessageErreur"] != null)
{
    <div class="alert alert-danger text-center mb-3">@TempData["MessageErreur"]</div>
}

<div class="card shadow mb-4">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-4">
            @using (Html.BeginForm("ImportContacts", "Contact", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <div class="input-group" style="width: 60%;">
                    <input type="file" name="fichier" class="form-control" accept=".json" required />
                    <button class="btn btn-success" type="submit">
                        <i class="bi bi-upload"></i> Importer (JSON)
                    </button>
                </div>
            }
            @Html.ActionLink("Ajouter un nouveau contact", "AjouterContact", "Contact", null, new { @class = "btn btn-primary" })
        </div>

        @if (!Model.Any())
        {
            <p class="text-center text-muted">Vous n'avez aucun contact pour le moment.</p>
        }
        else
        {
            <div class="table-responsive">
                <table class="table table-striped table-bordered align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>Nom</th>
                            <th>Prénom</th>
                            <th>Téléphone</th>
                            <th>Email</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var contact in Model)
                        {
                            <tr>
                                <td>@contact.Nom</td>
                                <td>@contact.Prenom</td>
                                <td>@contact.Telephone</td>
                                <td>@contact.Email</td>
                                <td class="text-center">
                                    <a href="@Url.Action("Details", "Contact", new { id = contact.Id })" class="btn btn-info btn-sm me-1" title="Voir">
                                        <i class="bi bi-eye"></i>
                                    </a>
                                    <a href="@Url.Action("Edit", "Contact", new { id = contact.Id })" class="btn btn-warning btn-sm me-1" title="Modifier">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <a href="@Url.Action("Delete", "Contact", new { id = contact.Id })" class="btn btn-danger btn-sm" title="Supprimer">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>